generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model Event {
  id          String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name        String   @db.VarChar(255)
  description String?  @db.Text
  location    String?  @db.VarChar(255)
  category    String   @db.VarChar(50)
  link        String?  @db.VarChar(500)
  startTime   DateTime @map("start_time") @db.Timestamptz()
  endTime     DateTime @map("end_time") @db.Timestamptz()
  createdAt   DateTime @default(now()) @map("created_at") @db.Timestamptz()
  updatedAt   DateTime @default(now()) @updatedAt @map("updated_at") @db.Timestamptz()

  signups EventSignup[]

  @@map("events")
}

model EventSignup {
  id        String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  eventId   String   @map("event_id") @db.Uuid
  name      String   @db.VarChar(255)
  email     String   @db.VarChar(255)
  attended  Boolean  @default(false)
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamptz()

  event Event @relation(fields: [eventId], references: [id], onDelete: Cascade)

  @@unique([eventId, email])
  @@map("event_signups")
}

model Officer {
  id           String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name         String    @db.VarChar(255)
  role         String    @db.VarChar(100)
  bio          String?   @db.Text
  email        String?   @db.VarChar(255)
  linkedin     String?   @db.VarChar(500)
  imageUrl     String?   @map("image_url") @db.VarChar(500)
  termStart    DateTime? @map("term_start") @db.Date
  termEnd      DateTime? @map("term_end") @db.Date
  isCurrent    Boolean   @default(true) @map("is_current")
  displayOrder Int       @default(0) @map("display_order")
  createdAt    DateTime  @default(now()) @map("created_at") @db.Timestamptz()
  updatedAt    DateTime  @default(now()) @updatedAt @map("updated_at") @db.Timestamptz()

  @@map("officers")
}

model LineageMember {
  id             String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name           String   @db.VarChar(255)
  graduationYear Int?     @map("graduation_year")
  role           String?  @db.VarChar(100)
  imageUrl       String?  @map("image_url") @db.VarChar(500)
  mentorId       String?  @map("mentor_id") @db.Uuid
  treeName       String?  @map("tree_name") @db.VarChar(100)
  createdAt      DateTime @default(now()) @map("created_at") @db.Timestamptz()
  updatedAt      DateTime @default(now()) @updatedAt @map("updated_at") @db.Timestamptz()

  mentor  LineageMember?  @relation("MentorMentee", fields: [mentorId], references: [id])
  mentees LineageMember[] @relation("MentorMentee")

  @@map("lineage_members")
}

model Announcement {
  id        String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  title     String   @db.VarChar(255)
  content   String?  @db.Text
  isActive  Boolean  @default(true) @map("is_active")
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamptz()
  updatedAt DateTime @default(now()) @updatedAt @map("updated_at") @db.Timestamptz()

  @@map("announcements")
}

model Admin {
  id           String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  email        String   @unique @db.VarChar(255)
  passwordHash String   @map("password_hash") @db.VarChar(255)
  createdAt    DateTime @default(now()) @map("created_at") @db.Timestamptz()

  @@map("admins")
}

model ContactSubmission {
  id        String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name      String   @db.VarChar(255)
  email     String   @db.VarChar(255)
  message   String   @db.Text
  isRead    Boolean  @default(false) @map("is_read")
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamptz()

  @@map("contact_submissions")
}
